<div
  class="min-vh-100 d-flex flex-column"
  style="background: radial-gradient(circle at top right, #e0f2fe 0%, #f8fafc 50%)"
>
  <!-- Main Content Wrapper -->
  <div class="flex-grow-1 d-flex align-items-start justify-content-center py-5">
    <div class="row w-100 max-width-1200 px-4 my-0">
      <!-- Left Side: Hero content -->
      <div class="col-lg-5 d-none d-lg-flex flex-column justify-content-center pe-5">
        <div class="mb-4">
          <div class="bg-primary rounded-4 p-3 d-inline-block shadow-lg mb-4">
            <i class="bi bi-heart-pulse-fill text-white fs-1"></i>
          </div>
          <h1 class="h1 fw-bold mb-3">Únete a <br /><span class="gradient-text">Medicus</span></h1>
          <p class="fs-5 text-muted mb-4">
            Crea tu cuenta y accede a la <br />mejor plataforma de gestión clínica.
          </p>
        </div>

        <div class="row g-3">
          <div class="col-12 col-xl-10">
            <div
              class="glass-morphism p-3 rounded-4 shadow-sm cursor-pointer hover-scale transition-all"
              routerLink="/agendar-cita"
            >
              <div class="d-flex align-items-center gap-3">
                <i class="bi bi-calendar-check text-primary fs-3"></i>
                <div>
                  <h6 class="fw-bold mb-0">Agenda Fácil</h6>
                  <p class="small text-muted mb-0">Reserva tus citas médicas en segundos.</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 col-xl-10">
            <div
              class="glass-morphism p-3 rounded-4 shadow-sm cursor-pointer hover-scale transition-all"
              (click)="viewHistory()"
            >
              <div class="d-flex align-items-center gap-3">
                <i class="bi bi-file-medical text-success fs-3"></i>
                <div>
                  <h6 class="fw-bold mb-0">Historial Digital</h6>
                  <p class="small text-muted mb-0">
                    Accede a tu historial médico desde cualquier lugar.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side: Register Form -->
      <div class="col-lg-7">
        <div class="card-premium border-0 p-3 shadow-lg animate-fade-in">
          <div class="text-center mb-3">
            <!-- Branding -->
            <div class="d-flex align-items-center justify-content-center gap-2 mb-1">
              <div class="bg-primary rounded-3 p-1.5 d-inline-flex">
                <i class="bi bi-heart-pulse-fill text-white" style="font-size: 1rem"></i>
              </div>
              <h2 class="fw-bold mb-0 text-primary" style="font-size: 1.3rem">MEDICUS</h2>
            </div>
            <p class="fw-bold mb-0">{{ langService.translate('register.title') }}</p>
            <p class="text-muted x-small mb-0">{{ langService.translate('register.subtitle') }}</p>
          </div>

          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <!-- Scrollable Fields Container -->
            <div
              style="max-height: 60vh; overflow-y: auto; overflow-x: hidden; padding: 0.5rem 0.2rem"
              class="custom-scrollbar px-1 mb-2"
            >
              <!-- Account Type Selection -->
              <div class="mb-3">
                <label class="form-label small fw-bold mb-1">{{
                  langService.translate('landing.accountType')
                }}</label>
                <div class="d-flex gap-2">
                  <select
                    class="form-select glass-morphism border rounded-3 py-1.5"
                    formControlName="accountType"
                  >
                    <option value="PATIENT">{{ langService.translate('register.patient') }}</option>
                    <option value="PROFESSIONAL">
                      {{ langService.translate('landing.professional') }}
                    </option>
                    <option value="CLINIC">{{ langService.translate('landing.clinic') }}</option>
                    <option value="HOSPITAL">
                      {{ langService.translate('landing.hospital') }}
                    </option>
                  </select>
                </div>
              </div>
              <!-- Username & Email -->
              <div class="row g-2 mb-2">
                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">{{
                    langService.translate('common.username')
                  }}</label>
                  <input
                    type="text"
                    class="form-control glass-morphism border rounded-3 py-1.5"
                    formControlName="username"
                    placeholder="usuario123"
                  />
                  <small
                    class="text-danger"
                    *ngIf="
                      registerForm.get('username')?.touched && registerForm.get('username')?.invalid
                    "
                  >
                    {{ getErrorMessage('username') }}
                  </small>
                </div>

                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">{{
                    langService.translate('auth.email')
                  }}</label>
                  <input
                    type="email"
                    class="form-control glass-morphism border rounded-3 py-1.5"
                    formControlName="email"
                    placeholder="correo@ejemplo.com"
                  />
                  <small
                    class="text-danger"
                    *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid"
                  >
                    {{ getErrorMessage('email') }}
                  </small>
                </div>
              </div>

              <!-- Password & Confirm -->
              <div class="row g-2 mb-2">
                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">{{
                    langService.translate('auth.password')
                  }}</label>
                  <div class="position-relative">
                    <input
                      [type]="showPassword() ? 'text' : 'password'"
                      class="form-control glass-morphism border rounded-3 py-1.5 pe-5"
                      formControlName="password"
                      placeholder="••••••••"
                    />
                    <button
                      type="button"
                      class="btn btn-link position-absolute end-0 top-50 translate-middle-y text-muted border-0 shadow-none px-3"
                      (click)="showPassword.set(!showPassword())"
                    >
                      <i
                        class="bi"
                        [ngClass]="showPassword() ? 'bi-eye-slash-fill' : 'bi-eye-fill'"
                      ></i>
                    </button>
                  </div>
                  <small
                    class="text-danger"
                    *ngIf="
                      registerForm.get('password')?.touched && registerForm.get('password')?.invalid
                    "
                  >
                    {{ getErrorMessage('password') }}
                  </small>
                </div>

                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">{{
                    langService.translate('common.confirm')
                  }}</label>
                  <div class="position-relative">
                    <input
                      [type]="showConfirmPassword() ? 'text' : 'password'"
                      class="form-control glass-morphism border rounded-3 py-1.5 pe-5"
                      formControlName="confirmPassword"
                      placeholder="••••••••"
                    />
                    <button
                      type="button"
                      class="btn btn-link position-absolute end-0 top-50 translate-middle-y text-muted border-0 shadow-none px-3"
                      (click)="showConfirmPassword.set(!showConfirmPassword())"
                    >
                      <i
                        class="bi"
                        [ngClass]="showConfirmPassword() ? 'bi-eye-slash-fill' : 'bi-eye-fill'"
                      ></i>
                    </button>
                  </div>
                  <small
                    class="text-danger"
                    *ngIf="
                      registerForm.get('confirmPassword')?.touched &&
                      registerForm.get('confirmPassword')?.invalid
                    "
                  >
                    {{ getErrorMessage('confirmPassword') }}
                  </small>
                </div>
              </div>

              <!-- First & Last Name -->
              <div class="row g-2 mb-2">
                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">{{
                    langService.translate('nurses.fields.firstName')
                  }}</label>
                  <input
                    type="text"
                    class="form-control glass-morphism border rounded-3 py-1.5"
                    formControlName="firstName"
                    placeholder="Juan"
                  />
                  <small
                    class="text-danger"
                    *ngIf="
                      registerForm.get('firstName')?.touched &&
                      registerForm.get('firstName')?.invalid
                    "
                  >
                    {{ getErrorMessage('firstName') }}
                  </small>
                </div>

                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">{{
                    langService.translate('nurses.fields.lastName')
                  }}</label>
                  <input
                    type="text"
                    class="form-control glass-morphism border rounded-3 py-1.5"
                    formControlName="lastName"
                    placeholder="Pérez"
                  />
                  <small
                    class="text-danger"
                    *ngIf="
                      registerForm.get('lastName')?.touched && registerForm.get('lastName')?.invalid
                    "
                  >
                    {{ getErrorMessage('lastName') }}
                  </small>
                </div>
              </div>

              <!-- Patient Specific Fields -->
              <div *ngIf="accountType() === 'PATIENT'">
                <div class="row g-2 mb-2">
                  <div class="col-md-6">
                    <label class="form-label small fw-bold mb-1">{{
                      langService.translate('medical_history.id')
                    }}</label>
                    <input
                      type="text"
                      class="form-control glass-morphism border rounded-3 py-1.5"
                      formControlName="documentId"
                      placeholder="V-12345678"
                    />
                    <small
                      class="text-danger"
                      *ngIf="
                        registerForm.get('documentId')?.touched &&
                        registerForm.get('documentId')?.invalid
                      "
                    >
                      {{ getErrorMessage('documentId') }}
                    </small>
                  </div>

                  <div class="col-md-6">
                    <label class="form-label small fw-bold mb-1">
                      <i class="bi bi-whatsapp text-success me-1"></i
                      >{{ langService.translate('medical_history.phone') }}
                    </label>
                    <input
                      type="tel"
                      class="form-control glass-morphism border rounded-3 py-1.5"
                      formControlName="phone"
                      placeholder="+58 424-1234567"
                    />
                    <small
                      class="text-danger"
                      *ngIf="
                        registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid
                      "
                    >
                      {{ getErrorMessage('phone') }}
                    </small>
                  </div>
                </div>

                <div class="row g-2 mb-2">
                  <div class="col-md-6">
                    <label class="form-label small fw-bold mb-1">{{
                      langService.translate('common.birthDate')
                    }}</label>
                    <input
                      type="date"
                      class="form-control glass-morphism border rounded-3 py-1.5"
                      formControlName="birthDate"
                    />
                  </div>

                  <div class="col-md-6">
                    <label class="form-label small fw-bold mb-1">{{
                      langService.translate('medical_history.gender')
                    }}</label>
                    <select
                      class="form-select glass-morphism border rounded-3 py-1.5"
                      formControlName="gender"
                    >
                      <option value="">{{ langService.translate('payments.select') }}</option>
                      <option value="Male">{{ langService.translate('common.male') }}</option>
                      <option value="Female">{{ langService.translate('common.female') }}</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Provider Specific Fields -->
              <div *ngIf="accountType() !== 'PATIENT'">
                <div
                  class="mb-2"
                  *ngIf="accountType() === 'CLINIC' || accountType() === 'HOSPITAL'"
                >
                  <label class="form-label small fw-bold mb-1">{{
                    langService.translate('landing.businessName')
                  }}</label>
                  <input
                    type="text"
                    class="form-control glass-morphism border rounded-3 py-2"
                    formControlName="businessName"
                    [placeholder]="langService.translate('landing.businessNamePlaceholder')"
                  />
                </div>

                <div class="row g-2 mb-2">
                  <div class="col-md-6">
                    <label class="form-label small fw-bold mb-1">{{
                      langService.translate('register.license')
                    }}</label>
                    <input
                      type="text"
                      class="form-control glass-morphism border rounded-3 py-1.5"
                      formControlName="licenseNumber"
                      placeholder="Nº Colegiatura"
                    />
                  </div>
                  <div class="col-md-6">
                    <label class="form-label small fw-bold mb-1">{{
                      langService.translate('medical_history.phone')
                    }}</label>
                    <input
                      type="tel"
                      class="form-control glass-morphism border rounded-3 py-1.5"
                      formControlName="phone"
                      placeholder="Teléfono contacto"
                    />
                  </div>
                </div>
              </div>

              <!-- Address (Common to all if provider, or patient optional) -->
              <div class="mb-2">
                <label class="form-label small fw-bold mb-1">{{
                  langService.translate('register.address')
                }}</label>
                <input
                  type="text"
                  class="form-control glass-morphism border rounded-3 py-2"
                  formControlName="address"
                  placeholder="Calle, ciudad, estado..."
                />
              </div>

              <div class="row g-2 mb-3">
                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">Tipo Sangre (Opcional)</label>
                  <select
                    class="form-select glass-morphism border rounded-3 py-1.5"
                    formControlName="bloodType"
                  >
                    <option value="">Seleccionar...</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                  </select>
                </div>

                <div class="col-md-6">
                  <label class="form-label small fw-bold mb-1">Alergias (Opcional)</label>
                  <input
                    type="text"
                    class="form-control glass-morphism border rounded-3 py-1.5"
                    formControlName="allergies"
                    placeholder="Penicilina, Polen..."
                  />
                </div>
              </div>
            </div>

            <!-- Compliance & Transparency Checkbox -->
            <div class="mb-3 px-1">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="acceptTerms"
                  formControlName="acceptTerms"
                />
                <label class="form-check-label x-small text-muted lh-sm" for="acceptTerms">
                  Acepto los términos y la política de privacidad. Mis datos serán tratados bajo los
                  estándares
                  <span class="fw-bold text-primary">ISO 27001</span> (Seguridad),
                  <span class="fw-bold text-success">ISO 9001</span> (Calidad) y el cumplimiento de
                  la <span class="fw-bold text-info">GDPR</span> (Protección de Datos
                  Internacional).
                </label>
              </div>
              <small
                class="text-danger x-small d-block mt-1"
                *ngIf="
                  registerForm.get('acceptTerms')?.touched &&
                  registerForm.get('acceptTerms')?.invalid
                "
              >
                Debes aceptar los términos para continuar.
              </small>
            </div>

            <!-- Submit Button -->
            <div class="d-grid gap-2 mt-2">
              <button type="submit" class="btn btn-primary-premium py-2" [disabled]="loading">
                <span *ngIf="!loading">
                  <i class="bi bi-person-plus-fill me-2"></i>Crear Cuenta
                </span>
                <span *ngIf="loading">
                  <span class="spinner-border spinner-border-sm me-2"></span>
                  Registrando...
                </span>
              </button>

              <div class="text-center">
                <p class="text-muted mb-0 small">
                  ¿Ya tienes una cuenta?
                  <a routerLink="/login" class="text-primary fw-bold text-decoration-none">
                    Inicia Sesión
                  </a>
                </p>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer removed -->
</div>

<style></style>
